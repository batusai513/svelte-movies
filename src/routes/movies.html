<MovieList {movies} />

<script>
  import axios from "axios";
  const API_KEY = "2c78ff3d64b6f6e489fc3faf1edd3a64";
  const BASE_URL = "http://api.themoviedb.org/3/";
  export default {
    components: {
      MovieList: "../components/MovieList"
    },
    preload({ params, query }) {
      return axios
        .get(`${BASE_URL}discover/movie`, {
          params: {
            api_key: API_KEY
          }
        })
        .then(({ data: { results, ...meta } }) => {
          return { movies: results, meta };
        });
    },
    data() {
      return {
        movies: [],
        meta: {}
      };
    }
  };
</script>